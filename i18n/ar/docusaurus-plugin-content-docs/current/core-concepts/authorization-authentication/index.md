---
title: مصادقة واجهة برمجة التطبيقات (API)
hide_title: false
draft: false
sidebar_label: مصادقة واجهة برمجة التطبيقات (API)
sidebar_position: 2
tags:
  - المصادقة
  - التفويض
keywords:
  - المصادقة المشتقة
  - مشتق-تفويض
description: قم بالوصول إلى المجموعة الكاملة من ميزات واجهة برمجة تطبيقات المشتقات على تطبيق التداول الخاص بك عن طريق مصادقة المستخدمين باستخدام رمز واجهة برمجة التطبيقات. تعلّم كيفية القيام بذلك من خلال مثال على واجهة برمجة التطبيقات.
---

بدون التفويض والمصادقة ستحصل فقط على إمكانية الوصول إلى ما يقرب من نصف مكالمات وميزات واجهة برمجة التطبيقات الخاصة بنا. على سبيل المثال، من أجل شراء العقود أو الاستفادة من ميزات "التداول بالنسخ"، يجب أن يكون المستخدمون لديك مصادقين ومصرحًا لهم من قبل \*\*مزود **OAuth** ومزود **WebSocket Server**.

## قبل أن نبدأ

يرجى التأكد من استيفاء جميع المتطلبات المذكورة أدناه للمتابعة.

### المتطلبات

1. حساب العميل المشتق
2. اشتقاق رمز API المميز بمستوى وصول مناسب
3. معرّف التطبيق المشتق

:::note
يُرجى الرجوع إلى [إعداد تطبيق مشتق] (/docs/docs/ seting-up-a-deriv-application) للحصول على إرشادات مفصلة حول كيفية إنشاء رمز مميز وتطبيق مشتق من واجهة برمجة التطبيقات.
:::

### رمز واجهة برمجة التطبيقات (API)

رمز API هو معرّف فريد للعميل الذي يطلب الوصول من الخادم. إنها أبسط طريقة للتفويض.

يجب أن يتطابق مستوى الوصول لكل رمز مميز لواجهة برمجة التطبيقات مع مستوى الوصول المطلوب لكل استدعاء لواجهة برمجة التطبيقات، والذي يمكن العثور عليه في [مستكشف واجهة برمجة التطبيقات] (/api-explorer) أيضًا.

على سبيل المثال، في لقطة الشاشة أدناه، يمكنك أن ترى أنه لكي تتمكن من استخدام حالة الحساب، يجب استخدام رمز مميز بمستوى وصول للقراءة.

![] (/img/acc/acc_status_scope_scope_api_explorer.png)

بعد تخويل اتصال WebSocket، سيتم اعتبار المكالمات اللاحقة على هذا الاتصال إجراءات مستخدم.

يرجى الأخذ في الاعتبار أنه يمكن استخدام رمز API المميز مع أي تطبيق، لذا يجب على كل من تطبيقك وعملائك الحفاظ على أمنه.

### OAuth2

يرمز OAuth إلى "التخويل المفتوح" - وهو بروتوكول يسمح للعميل بالوصول إلى الموارد المستضافة على الخادم نيابةً عن المستخدم دون الكشف عن بيانات الاعتماد.

يسمح هذا النوع من التفويض للعملاء بتسجيل الدخول إلى تطبيقات الجهات الخارجية باستخدام حسابات Deriv الخاصة بهم دون إنشاء رمز مميز لواجهة برمجة التطبيقات. في هذه الحالة، لا يرى تطبيق الطرف الثالث كلمة مرور المستخدم أو الرمز المميز الدائم لواجهة برمجة التطبيقات، مما يجعله أكثر أمانًا.

تتطلب مصادقة OAuth2 المزيد من الخطوات للإعداد، ولكنها الطريقة الأكثر أماناً للمطورين لمشاركة الوصول إلى تطبيقهم مع عملائهم.

للمزيد من المعلومات حول OAuth2، قم بزيارة [هذا الدليل] (https://aaronparecki.com/oauth-2-simplified/).

فيما يلي التمثيل المرئي لكيفية عمل اتصال مصادقة OAuth Authorization:

![OAuth flow] (/img/how_oauth_works.png 'OAuth flow')

## عملية المصادقة

لمصادقة المستخدم الخاص بك، حدد عنوان URL الذي سيتم استخدامه كعنوان URL لإعادة توجيه OAuth في صفحة [لوحة التحكم](/لوحة التحكم)، **علامة التبويب تسجيل التطبيق** في حقول **تفاصيل OAuth**. بعد ذلك، أضف زرًا لتسجيل الدخول على موقعك الإلكتروني أو تطبيقك ووجه المستخدمين إلى **`https://oauth.deriv.com/oauth2/authorize?app_id=your_app_id`** حيث يكون #التطبيق_خاصتك هو معرّف تطبيقك.

![Deriv OAuth Login] (/img/oauth_login.png 'Deriv OAuth Login')

بمجرد قيام المستخدم بالتسجيل/تسجيل الدخول، ستتم إعادة توجيهه إلى عنوان URL الذي أدخلته كعنوان URL لإعادة التوجيه. ستتم إضافة وسيطات إلى عنوان URL هذا مع الرموز المميزة لجلسة المستخدم، وسيبدو مشابهًا لهذا:

'https://[YOUR_WEBSITE_URL]/redirect/?acct1=cr799393& token1=a1-f7pnteezo4jzhpxxclizctzt27hyeot&cur1=usd& acct2=vrtc1859315& token2=a1clwe3vu3fuus5kraceykdsoqm4snfq& cur2=usd'

## عملية التفويض

معلمات الاستعلام في عنوان URL الخاص بإعادة التوجيه هي حسابات المستخدم ورموز جلسة العمل المرتبطة بها. يمكنك تعيين معلمات الاستعلام إلى مصفوفة باستخدام الطريقة التالية:

```js showLineNumbers
const user_accounts = [
  {
    account: 'cr799393 cr799393',
    الرمز المميز: 'a1-f7pnteezo4jzhpxclctctizt27hyeot',
    العملة: 'USD',
  },
  {
    حساب : 'vrtc1859315'،
    الرمز المميز: 'a1clwe3vuusfuus5kraceykdsoqm4snfq'،
    العملة: 'USD'،
  }،
];
```

لتخويل المستخدم استنادًا إلى حساب المستخدم **المحدد**، قم باستدعاء استدعاء واجهة برمجة التطبيقات [authorize] (/api-explorer#authorize) باستخدام \*\*الرمز المميز لحساب المستخدم **المحدد** **للجلسة**:

```js showLineNumbers
{
  "تصريح": "a1-f7-f7pnteezo4jzhpxclctzctizt27hyeot"
}
```

ستكون الاستجابة لاستدعاء "تخويل" كائنًا كما هو موضح أدناه:

```js showLineNumbers
{
    "account_list": [
      {
        "نوع_الحساب": "التداول"،
        "تم الإنشاء_في": 1647509550,
        "العملة": "USD",
        "is_disabled": 0,
        "is_virtual": 0,
        "landing_company_name": "svg"،
        "معرف تسجيل الدخول": "CR799393",
        "التداول": {}
      }،
      {
        "نوع_الحساب": "التداول"،
        "تم الإنشاء_في": 1664132232,
        "العملة": "ETH"،
        "is_dis_disabled": 0,
        "is_virtual": 0,
        "landing_company_name": "svg"،
        "معرف تسجيل الدخول": "VRTC1859315",
        "التداول": {}
      },
    ],
    "الرصيد": 0,
    "البلد": "معرف"،
    "العملة": "USD"،
    "البريد الإلكتروني": "user_mail@email_provider.com"،
    "الاسم الكامل": " John Doe",
    "is_virtual": 0,
    "landing_company_company_fullname": "Deriv (SVG) LLC",
    "landing_company_name": "svg",
    "Local_currencies": {
      "IDR": {
        "كسور_الأرقام": 2
      }، 2 }
    }،
    "معرف تسجيل الدخول": "CR799393"،
    "اللغة_المفضلة": "EN"،
    "النطاقات": [
      "قراءة"،
      "تداول"، "تداول"،
      "معلومات_التداول"،
      "المدفوعات"،
      "المسؤول"
    ]،
    "التداول": {}،
    "ترقية_شركات_التداول": [
      "svg"
    ]،
    "user_id": 12345678
}
```

والآن، أصبح المستخدم مخوّلًا، ويمكنك استخدام مكالمات Deriv API نيابةً عن الحساب.
