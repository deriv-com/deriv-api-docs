---
title: API ඇමතුම්වල කාර්යයන්
hide_title: false
draft: false
sidebar_label: API ඇමතුම්වල කාර්යයන්
sidebar_position: 1
tags:
  - සංකල්පය
  - ඇමතුම්
  - ව්‍යුහ විද්‍යාව
keywords:
  - ගනුදෙනු යෙදුම
  - API ඇමතුම්
  - API උදාහරණය
description: API ඇමතුම් විශේෂාංගය භාවිතා කරමින් ඔබේ වෙළඳ යෙදුම සඳහා API ඇමතුම් සකසන්න. API උදාහරණ සමඟ, දායක වීමට, ඉල්ලීම් යැවීමට සහ ප්රතිචාර දත්ත ලබා ගැනීමට ඉගෙන ගන්න.
---

## ග්‍රාහක වී යවන්න

සියලුම API ඇමතුම්වලට ඉල්ලීමක් කිරීමට සහ ප්‍රතිචාරයක් ලබා ගැනීම සඳහා යැවීම් ක්‍රියාකාරීත්වයක් ඇත. ඇතැම් API ඇමතුම්වලට නව තොරතුරු ලබා ගත හැකි වූ විට ඔබේ යෙදුම වෙත යාවත්කාලීන යැවීමට ඉඩ සලසන ග්‍රාහක ක්‍රියාකාරීත්වයක් ද ලබා දෙයි.

### ග්‍රාහක වන්න

API ඇමතුම් කිහිපයක් “දායකත්වය” ක්රියාකාරිත්වය සපයයි. ඔබ API ඇමතුමකට ග්‍රාහක වූ විට, ඔබට මෙම විශේෂිත API ඇමතුමේ දත්තවලින් අඛණ්ඩ ප්‍රවාහයක් ලැබෙනු ඇත.

මෙම API ඇමතුම් වලින් සමහරක් ස්වයංක්රීයව දායක වේ (උදා: [ටික්ස්] (/api-explorer #ticks)) සහ සමහරක් විකල්ප `subscribe` ක්ෂේත්රයක් ඇත. ඔබ `Subscribe` ක්ෂේත්රයට `1` සමත් වුවහොත්, දායකත්වය ආරම්භ වන අතර `Forget` හෝ `අමතක කරන්න` API ඇමතුම් අමතමින් ඔබ Unsubscribe කරන තෙක් සේවාදායකය ඉල්ලා සිටින දත්ත යැවීම දිගටම කරගෙන යනු ඇත.

උදාහරණයක් ලෙස, ටික් ඉතිහාස දත්ත ලබා ගැනීම සඳහා ඔබට [Tick History] (/api-explorer #ticks_history) අමතන්න පුළුවන්. නමුත් ඔබ මෙම ඇමතුමට `subscribe` විකල්පය එක් කළ විට, පළමු ප්රතිචාරයේ දී ඔබ ඉල්ලා සිටි ටික් ඉතිහාස දත්ත ඔබට ලැබෙනු ඇති අතර, ලබා දී ඇති සංකේතය සඳහා සේවාදායකය විසින් ප්රකාශයට පත් කරන ලද නව ටික් එකක් ඇති සෑම අවස්ථාවකම ඔබට නව ප්රතිචාරයක් දිගටම ලැබෙනු ඇත.

`Subscribe` වෙතින් පණිවිඩ ප්රවාහය තුළ `subscription` නමින් ක්ෂේත්රයක් තිබෙනවා. මේක තමයි “ස්ට්රීම් අයිඩී”. මෙම හැඳුනුම්පත සමඟ, ඔබේ තර්කනය තුළ පණිවිඩ ප්රවාහය හඳුනා ගත හැකි අතර `Forget` සහ `Forget All` API ඇමතුම් සමඟ ප්රවාහය නතර කළ හැකිය.

`දායකත්වය` ක්රියාකාරිත්වය සහිත API ඇමතුම් මගින් සපයනු ලබන දත්ත වෙනත් API ඇමතුම් සහ විශේෂාංග සඳහා දත්ත මූලාශ්රයක් ලෙස භාවිතා කළ හැකිය.

### යවන්න

ඔබ `send` ක්රියාකාරිත්වය සමඟ API අමතන්නේ නම්, සේවාදායකය ඉල්ලූ දත්ත ආපසු යවනු ලබන්නේ එක් වරක් පමණි. යාවත්කාලීන දත්ත ලබා ගැනීම සඳහා, ඔබ නැවත API ඇමතුම යැවිය යුතු ය. සාමාන්යයෙන්, ඔබ වෙනත් API ඇමතුම් ප්රතිචාර හෝ එවැනි `Click`, `Scroll`, සහ තවත් යූඅයි සිදුවීම් ලබා ගන්නා විට මෙම ක්රමය භාවිතා වේ.

### අමතක කරන්න

`Subscribe` විසින් නිර්මාණය කරන ලද පණිවිඩ ප්රවාහය නතර කිරීමට අවශ්ය නම්, ඔබට නිවැරදි `Stream ID` සමඟ `Forget` API ඇමතුම අමතන්න සිදුවේ. එසේ නොමැති නම්, ඔවුන්ගේ `Method name` මගින් ප්රවාහයන් නැවැත්වීම සඳහා `Forget All` API ඇමතුම භාවිතා කළ හැකිය.

:::caution
`Forget` API ඇමතුම පිළිබඳ වැඩි විස්තර සඳහා, API ගවේෂකයේ [අමතක කරන්න] (/api-explorer #forget) සහ [අමතක සියල්ල] (/api-explorer #forget_all) දෙස බලන්න.
:::

## දත්ත ඉල්ලන්න

ඔබේ WebSocket සම්බන්ධතාවයේ ඉල්ලීම සහ ප්‍රතිචාර ප්‍රවාහය හැසිරවීමට ඔබට පහසු කිරීම සඳහා, සෑම Deriv WebSocket API ඇමතුමක්ම ප්‍රමිතිගත ව්‍යුහයක් අනුගමනය කරයි. ඔබට එය cache කිරීම, වලංගු කිරීම, ඉල්ලීම සහ ප්‍රතිචාර සමමුහුර්තකරණය සඳහා භාවිත කළ හැක.

#### API ඇමතුම් ක්‍රමයේ නම

WebSocket API හි සෑම `ඉල්ලීමකට` ඉල්ලීම සඳහා අද්විතීය හඳුනාගැනීමක් ලෙස සේවය කරන `ක්රමය නාම` ක්ෂේත්රයක් ඇතුළත් වේ. බොහෝ අවස්ථාවලදී මෙම `ක්රමය නාමයට `1\` යන සංඛ්යාත්මක අගයක් ලැබෙනු ඇත. කෙසේ වෙතත්, හඳුනා ගැනීමේ දේපළට අනුක්‍රමික අගයක් තිබිය හැකි අවස්ථා තිබේ.

:::caution
API ඇමතුම් ක්රමයේ නම සැමවිටම අවශ්ය වේ. මෙම ක්ෂේත්‍රය අපගේ WebSocket සේවාදායකයෙන් ඔබට ලැබෙන දත්ත තීරණය කරයි.
:::

### අවශ්‍ය ක්ෂේත්‍ර

සෑම ඉල්ලීම් දත්තයකටම ඔබ සැපයිය යුතු අනිවාර්ය ක්ෂේත්‍ර ඇති අතර එයට විකල්ප ක්ෂේත්‍ර ද ඇතුළත් විය හැක. “නේවාසික ලැයිස්තුව” වෙතින් උදාහරණයක් සමඟ මෙය ගවේෂණය කරමු.

ගිණුම් විවෘත කිරීමේ පෝරමය ජනගත කිරීම සඳහා සුදුසු `නේවාසික ලැයිස්තුව` ඇමතුමක් රටවල් ලැයිස්තුවක් සහ අකුරු 2-රටක කේත ආපසු ලබා දෙයි.

මෙම ඇමතුම සඳහා ඉල්ලීම් දත්ත පහත පරිදි වේ:

```ts showLineNumbers
{
  residence_list: 1; // Api Call Method Name
  passthrough?: object; // Optional
  req_id?: number; // Optional
}
```

`residence_list` ක්ෂේත්‍රය ඇමතුම සඳහා `ක්‍රම නාමය` වන අතර එය අවශ්‍ය වේ. ඔබට යැවීමට අවශ්‍ය මෙම වර්ගයේ ඉල්ලීමකට අදාළ වෙනත් අත්‍යවශ්‍ය ක්ෂේත්‍ර තිබිය හැක. `නේවාසික ලැයිස්තුව` සහ අනෙකුත් API ඇමතුම් ගැන වැඩි විස්තර දැන ගැනීමට, කරුණාකර ඒවා පරීක්ෂා කරන්න [API Explorer] (/api-explorer #residence_list).

### විකල්ප ක්ෂේත්‍ර

සෑම ඇමතුමකටම 'විකල්ප' ක්ෂේත්ර කීපයක් ද ඇත. `Passthrough` සහ `req_id` සෑම විටම ඉල්ලීම් දත්තවල කොටසක් වන නමුත් ඔබට ඉවත් වීමට සහ ඒවා භාවිතා නොකිරීමට තෝරා ගත හැකිය.

#### 'පාස්' ක්ෂේත්රය

ඔබ මෙම ක්ෂේත්රයට පාස් කරන කුමක් වුවත් `ප්රතිචාර` වස්තුවක් ඇතුළත නැවත ඔබ වෙත ආපසු ලැබෙනු ඇත. ඔබේ `ඉල්ලීම්` සහ `ප්රතිචාර `සඳහා රාජ්යමය ප්රවාහයක් අනුකරණය කිරීමට අවශ්ය වූ විට මෙය ප්රයෝජනවත් විය හැකිය.

#### `Req_id` ක්ෂේත්‍රය

ඔබගේ ඉල්ලීම් `ටැග් කිරීමට සහ අපගේ `WebSocket`ඇමතුම් හරහා ඒවා සම්මත කිරීමට ඔබට අවශ්ය විය හැකිය. ඔබට එසේ කළ හැකිය මෙම ක්ෂේත්රයට`අංකය`සම්මත කිරීමෙන්.`ප්රතිචාර `වෙත `ඉල්ලීම්\` සිතියම් ගත කිරීමට අවශ්ය වූ විට එය ප්රයෝජනවත් විය හැකිය.

:::caution
එක් එක් API ඇමතුමට විශේෂිත වූ අමතර විකල්ප ක්ෂේත්‍ර ගැන දැන ගැනීමට, කරුණාකර අපගේ [API Explorer](/api-explorer) වෙත යොමු වන්න.
:::

## ප්‍රතිචාර දත්ත

ඔබ ඇමතුම සඳහා ප්රතිචාරය ලබා ගත් විට, සත්ය දත්ත අඩංගු `method name` හා සමාන නමක් සහිත `Field` එකක් වනු ඇත.

`නේවාසික ලැයිස්තුව` ඇමතුමට ලැබෙන ප්රතිචාරය:

```js showLineNumbers
{
  echo_req: {
    req_id: 1,
    residence_list: 1,
  },
  msg_type: 'පදිංචි_ලැයිස්තුව',
  req_id: 1,
  පදිංචි_ලැයිස්තුව: [
       {
            “අනන්යතාවය”: {
                “සේවා”: {
                    “idv”: {
                        “documents_support”: {},
                        “has_visual_ නියැදි”: 0,
                        “is_country_support”: 0
                    },
                    “ඔන්ෆිඩෝ”: {
                        “documents_support”: {
                            “driving_licence”: {
                                “display_name”: “රියදුරු බලපත්රය”
                            }
                        },
                        “is_country_support”: 0
                    }
                }
            },
            “phone_idd”: “35818",
            “text”: “ඇලන්ඩ් දූපත්”,
            “value”: “ax”
        },
        {
            “අනන්යතාවය”: {
                “සේවා”: {
                    “idv”: {
                        “documents_support”: {},
                        “has_visual_sample”: 0,
                        “is_country_support”: 0
                    },
                    “ඔන්ෆිඩෝ”: {
                        “documents_support”: {
                            “driving_licence”: {
                                “display_name”: “රියදුරු බලපත්රය”
                            },
                            “national_Identity_card”: {
                                “display_name” : “ජාතික හැඳුනුම්පත”
                            },
                            “විදේශ ගමන් බලපත්රය”: {
                                “display_name”: “විදේශ ගමන් බලපත්රය”
                            }
                        },
                        “is_country_supported”: 1
                    }
                }
            },
            “phone_idd”: “355",
            “text”: “ඇල්බේනියාව”,
            “tin_format”: [
                “^ [A-ta-T0-9]\\ d{8}[A-wa-W] $”
            ],
            “අගය”: “අල්”
        },
        //...
  ],
};
```

මෙහිදී `residence_list` යනු `ක්‍රම නාමය` වන අතර, ඔබ ඉල්ලා සිටි සැබෑ දත්ත එහි අඩංගු වේ. කෙටියෙන් පැවසුවහොත්, අපි ඉතිරි අරාව ඇතුළත් කර නැත. ඔබට සත්ය ප්රතිචාරය පරීක්ෂා කළ හැකිය [මෙහි] (/api-explorer #residence_list).

#### `echo_req` ක්ෂේත්රය

මෙම `Field` ඔබ සේවාදායකයට යැවූ නිශ්චිත `Request Data` අඩංගු වේ.

#### \`msg_වර්ගය' ක්ෂේත්රය

මෙම `Field` ඔබට WebSocket සම්බන්ධතාවයේ පණිවිඩ ඉසව්ව මත ලබා ගන්නා `message` දත්ත කුමක්දැයි තීරණය කිරීමට උපකාරී වේ. උදාහරණයක් ලෙස, `JavaScript` හි ඔබේ වෙබ්සොකට් සම්බන්ධතාවය සඳහා ඔබේ `onmessage` සිදුවීම් හසුරුවන්නා වනු ඇත:

```js showLineNumbers
socket.onmessage = (සිදුවීම) => {
  const ReceivedMessage = JSON.parse (event.data);

  මාරු (ReceivedMessage.msg_type) {
    නඩුව “පදිංචි_ලැයිස්තුව”:
      console.log (“පදිංචිය ලැයිස්තුව: “, ReceivedMessage.residence_list)
      බිඳීම;
    නඩුව “අනිත්_ඉල්ලුම්_හඳුනාගැනීම”
      console.log (“ප්රතිචාරය”, පණිවිඩය. තව කෙනෙක්_ request_identifikator)
    පෙරනිමි:
      console.log (“ලැබුනපණිවිඩය”, ලැබුනපණිවිඩය)
      බිඳීම;
  }
}
```

#### `Req_id` ක්ෂේත්‍රය

මෙය `Request Data` වෙත සම්මත වූ `විකල්පය` වන අතර, `Validation`, `සමමුහුර්තය`, `කැෂං` ආදිය සඳහා එය භාවිතා කළ හැකිය.

:::tip
ප්රතිචාර දත්ත මත “msg_type” සෑම විටම පවතී.
:::
