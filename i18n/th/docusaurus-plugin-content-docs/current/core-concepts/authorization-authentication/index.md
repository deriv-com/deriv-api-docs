---
title: การตรวจสอบความถูกต้อง API
hide_title: false
draft: false
sidebar_label: การตรวจสอบความถูกต้อง API
sidebar_position: 2
tags:
  - การรับรองความถูกต้อง
  - การอนุญาตให้สิทธิ์
keywords:
  - deriv-authentication
  - การอนุมัติอนุพันธ์
description: เข้าถึงฟีเจอร์ Deriv API ที่สมบูรณ์ในแอพการซื้อขายของคุณโดยการตรวจสอบสิทธิ์ผู้ใช้ด้วยโทเค็น API เรียนรู้ที่จะทำเช่นนี้ด้วยตัวอย่าง API เรียนรู้ที่จะทำเช่นนี้ด้วยตัวอย่าง API เรียนรู้ที่จะทำเช่นนี้ด้วยตัวอย่าง API
---

หากไม่ได้รับการอนุญาตให้สิทธิ์และการรับรองความถูกต้อง คุณจะเข้าถึงการเรียกใช้งานและฟีเจอร์ของ API ได้เพียงครึ่งเดียวเท่านั้น หากไม่ได้รับการอนุญาตให้สิทธิ์และการรับรองความถูกต้อง คุณจะเข้าถึงการเรียกใช้งานและฟีเจอร์ของ API ได้เพียงครึ่งเดียวเท่านั้น ตัวอย่างเช่น ในการซื้อสัญญาหรือใช้คุณสมบัติ “Copy Trading” ผู้ใช้ของคุณจะต้องได้รับการรับรองและได้รับอนุญาตจากผู้ให้บริการ **OAuth** ของเราและ**WebSocket Server**

## ก่อนที่เราจะเริ่ม

โปรดตรวจดูให้แน่ใจว่า คุณมีคุณสมบัติตรงตามข้อกำหนดทั้งหมดที่ระบุไว้ด้านล่างเพื่อดำเนินการต่อ

### ข้อกำหนดความต้องการ

1. บัญชีลูกค้า Deriv
2. โทเคน Deriv API ที่มีระดับการเข้าถึงที่เหมาะสม
3. รหัสไอดีแอป Deriv

:::note
โปรดดูที่ [การตั้งค่าแอปพลิเคชัน Deriv] (/docs/setting-up-a-deriv-application) สำหรับคำแนะนำโดยละเอียดเกี่ยวกับวิธีการสร้างโทเค็นและแอปพลิเคชัน Deriv API
:::

### โทเคน API

โทเคน API เป็นตัวบ่งชี้ที่ไม่ซ้ำซ้อนของผู้ใช้งานที่ร้องขอการเข้าถึงจากเซิร์ฟเวอร์ มันเป็นวิธีการอนุญาตให้สิทธิ์ที่ง่ายที่สุด

ระดับการเข้าถึงสำหรับแต่ละโทเค็น API จะต้องตรงกับระดับการเข้าถึงที่ต้องการของการเรียกใช้ API แต่ละครั้ง ซึ่งสามารถพบได้ใน [API Explorer] (/api-explorer) เช่นกัน

ตัวอย่างเช่น ในภาพหน้าจอด้านล่าง คุณจะเห็นว่าเพื่อให้สามารถใช้สถานะของบัญชีได้ ต้องใช้โทเคนที่มีระดับการเข้าถึงแบบอ่าน

![](/img/acc_status_scope_api_explorer.png)

หลังจากได้รับการอนุญาตให้สิทธิ์จากการเชื่อมต่อ WebSocket แล้ว การเรียกใช้งานในภายหลังที่ใช้การเชื่อมต่อดังกล่าวจะถือเป็นการกระทำของผู้ใช้งาน

โปรดทราบว่าโทเคน API สามารถใช้กับแอปใดก็ได้ ดังนั้นทั้งแอปของคุณและผู้ใช้งานของคุณจำเป็นต้องได้รับการปกป้องรักษาความปลอดภัย

### OAuth2

OAuth ย่อมาจาก `Open Authorisation` — โปรโตคอลที่อนุญาตให้ลูกค้าเข้าถึงทรัพยากรที่โฮสต์บนเซิร์ฟเวอร์ในนามของผู้ใช้โดยไม่เปิดเผยข้อมูลประจำตัว

การอนุญาตให้สิทธิ์ประเภทนี้จะยอมให้ผู้ใช้งานลงชื่อเข้าใช้แอปของบุคคลภายนอกโดยใช้บัญชี Deriv ของพวกเขาโดยที่ไม่ต้องสร้างโทเคน API ในกรณีนี้ แอปของบุคคลภายนอกนั้นก็จะไม่เห็นรหัสผ่านของผู้ใช้งานหรือโทเคน API ถาวร จึงทำให้มีความปลอดภัยมากยิ่งขึ้น

การตรวจสอบความถูกต้อง OAuth2 นั้นจะต้องมีขั้นตอนการตั้งค่าเพิ่มเติม แต่มันก็เป็นวิธีที่ปลอดภัยที่สุดสำหรับนักพัฒนาในแชร์การเข้าถึงแอปของพวกเขาให้กับผู้ใช้งานของพวกเขา

สำหรับข้อมูลเพิ่มเติมเกี่ยวกับ OAuth2 โปรดไปที่ [คู่มือนี้] (https://aaronparecki.com/oauth-2-simplified/)

นี่คือการแสดงภาพของวิธีการเชื่อมต่อเกี่ยวกับการอนุญาตให้สิทธิ์ OAuth:

![การไหลของ OAuth] (/img/how_oauth_works.png 'โฟลว์ OAuth ')

## กระบวนการรับรองความถูกต้อง

ในการตรวจสอบสิทธิ์ผู้ใช้ของคุณ ให้ระบุ URL ที่จะใช้เป็น URL การเปลี่ยนเส้นทาง OAuth บนหน้า [แดชบอร์ด] (/แดชบอร์ด) แท็บ**ลงทะเบียนแอปพลิเคชัน** ในฟิลด์\*\*รายละเอียด OAuth \*\* จากนั้นเพิ่มปุ่มเข้าสู่ระบบบนเว็บไซต์หรือแอพของคุณและนำผู้ใช้ไปที่ **`https://oauth.deriv.com/oauth2/authorize?app_id=your_app_id`** โดยที่ your_app_id คือID ของแอปของคุณ การอนุมัติอนุพันธ์ การอนุมัติอนุพันธ์

![การเข้าสู่ระบบ OAuth Deriv] (/img/oauth_login.png 'การเข้าสู่ระบบ OAuth Derive')

การอนุมัติอนุพันธ์ URL นี้จะมีหลักฐานที่เพิ่มเข้ามาด้วยโทเคนเซสชั่นของผู้ใช้ และจะมีลักษณะคล้ายกับดังต่อไปนี้:

`https://[YOUR_WEBSITE_URL]/redirect/?acct1=cr799393& โทเคน1 = a1-f7pnteezo4jzhpxclctizt27hyeot&cur1=USD& acct2=vrtc1859315 & โทเคน2=a1clwe3vfuuus5kraceykdsoqm4snfq& cur2=usd`

## ขั้นตอนการอนุญาตให้สิทธิ์

พารามิเตอร์แบบสอบถามใน URL การอนุญาตคือบัญชีของผู้ใช้และโทเค็นเซสชันที่เกี่ยวข้อง คุณสามารถจับคู่จัดวางพารามิเตอร์การค้นหาเป็นอาร์เรย์หรือชุดข้อมูลที่เก็บเรียงข้อมูลประเภทเดียวกันโดยใช้วิธีการดังต่อไปนี้: คุณสามารถจับคู่จัดวางพารามิเตอร์การค้นหาเป็นอาร์เรย์หรือชุดข้อมูลที่เก็บเรียงข้อมูลประเภทเดียวกันโดยใช้วิธีการดังต่อไปนี้:

```js showLineNumbers
const user_accounts = [
  {
    account: 'cr799393',
    token: 'a1-f7pnteezo4jzhpxclctizt27hyeot',
    currency: 'usd',
  },
  {
    account: 'vrtc1859315',
    token: 'a1clwe3vfuuus5kraceykdsoqm4snfq',
    currency: 'usd',
  },
];
```

หากต้องการให้สิทธิ์ผู้ใช้ตามบัญชี**ที่เลือก** ของผู้ใช้ ให้เรียกการโทร API [อนุญาต] (/api-explorer #authorize) ด้วยบัญชี**ที่เลือก** ของผู้ใช้ **โทเค็นเซสชัน**:

```js showLineNumbers
{
  "authorize": "a1-f7pnteezo4jzhpxclctizt27hyeot"
}
```

การตอบสนองสำหรับการโทร “Authorize” จะเป็นวัตถุดังต่อไปนี้:

```js showLineNumbers
{
    "account_list": [
      {
        "account_type": "trading",
        "created_at": 1647509550,
        "currency": "USD",
        "is_disabled": 0,
        "is_virtual": 0,
        "landing_company_name": "svg",
        "loginid": "CR799393",
        "trading": {}
      },
      {
        "account_type": "trading",
        "created_at": 1664132232,
        "currency": "ETH",
        "is_disabled": 0,
        "is_virtual": 0,
        "landing_company_name": "svg",
        "loginid": "VRTC1859315",
        "trading": {}
      },
    ],
    "balance": 0,
    "country": "id",
    "currency": "USD",
    "email": "user_mail@email_provider.com",
    "fullname": " John Doe",
    "is_virtual": 0,
    "landing_company_fullname": "Deriv (SVG) LLC",
    "landing_company_name": "svg",
    "local_currencies": {
      "IDR": {
        "fractional_digits": 2
      }
    },
    "loginid": "CR799393",
    "preferred_language": "EN",
    "scopes": [
      "read",
      "trade",
      "trading_information",
      "payments",
      "admin"
    ],
    "trading": {},
    "upgradeable_landing_companies": [
      "svg"
    ],
    "user_id": 12345678
  }
```

ขณะนี้ ผู้ใช้ได้รับอนุญาตแล้ว และคุณสามารถใช้การเรียกใช้งาน Deriv API ในนามของบัญชีได้
